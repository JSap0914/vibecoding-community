################################################################################
# VIBECODING: Staging Environment Configuration Template
#
# This file documents all environment variables needed for staging deployment.
# Configure these values in your hosting platform (Railway/Render) dashboard.
# NEVER commit actual secrets to version control.
################################################################################

################################################################################
# CORE APPLICATION CONFIGURATION (REQUIRED)
################################################################################

# App Domain & Protocol
# Set to your staging domain (e.g., staging.vibecoding.community)
APP_DOMAIN="staging.vibecoding.community"
APP_PROTOCOL="https://"

# Forem Owner Secret (Required for admin access)
# Generate with: rails secret
# ‚ö†Ô∏è  CRITICAL: Set in platform dashboard secrets
FOREM_OWNER_SECRET="<generate-with-rails-secret>"

# Community Identity
COMMUNITY_NAME="Vibecoding Community (Staging)"
DEFAULT_EMAIL="admin@vibecoding.community"

################################################################################
# DATABASE CONFIGURATION (REQUIRED)
################################################################################

# PostgreSQL Database (Managed by Railway/Render)
# ‚ö†Ô∏è  Set automatically by platform or configure manually
# Format: postgresql://user:password@host:port/database_name
DATABASE_URL="<provided-by-platform>"

# Database Connection Pooling
DATABASE_POOL_SIZE=10
RAILS_MAX_THREADS=10

################################################################################
# REDIS CONFIGURATION (REQUIRED)
################################################################################

# Redis URL (Managed by Railway/Render)
# ‚ö†Ô∏è  Set automatically by platform or configure manually
# Format: redis://user:password@host:port
REDIS_URL="<provided-by-platform>"

# Redis for sessions (optional, falls back to REDIS_URL if not set)
REDIS_SESSIONS_URL="<optional-separate-redis-for-sessions>"

# Redis for Sidekiq (optional, falls back to REDIS_URL if not set)
REDIS_SIDEKIQ_URL="<optional-separate-redis-for-sidekiq>"

# Session Configuration
SESSION_KEY="_Vibecoding_Community_Session_Staging"
SESSION_EXPIRY_SECONDS=1209600  # Two weeks

################################################################################
# RAILS & NODE ENVIRONMENT
################################################################################

# Rails Environment
RAILS_ENV="production"

# Node Environment
NODE_ENV="production"

# Secret Key Base (Required for production/staging)
# ‚ö†Ô∏è  CRITICAL: Generate with: rails secret
# ‚ö†Ô∏è  Set in platform dashboard secrets
SECRET_KEY_BASE="<generate-with-rails-secret>"

# Rails Serve Static Files (required for Railway/Render)
RAILS_SERVE_STATIC_FILES="true"

# Rails Log to STDOUT (required for platform logging)
RAILS_LOG_TO_STDOUT="true"

################################################################################
# WEB SERVER CONFIGURATION
################################################################################

# Puma Web Server
WEB_CONCURRENCY=2
PORT=3000

# Rack Timeout
RACK_TIMEOUT_WAIT_TIMEOUT=30
RACK_TIMEOUT_SERVICE_TIMEOUT=30

# SSL Configuration
FORCE_SSL_IN_RAILS="true"

################################################################################
# DEPLOYMENT & MONITORING (REQUIRED)
################################################################################

# Git SHA for versioning (set by CI/CD)
GIT_SHA="${RAILWAY_GIT_COMMIT_SHA:-$RENDER_GIT_COMMIT}"

# Health Check Token (optional - for securing health endpoints)
# HEALTH_CHECK_TOKEN="<optional-token-for-health-endpoints>"

################################################################################
# THIRD-PARTY SERVICES (CONFIGURE AS NEEDED)
################################################################################

# Cloudinary for Image Storage
# ‚ö†Ô∏è  Sign up at: https://cloudinary.com (Free tier: 25GB storage, 25GB bandwidth/month)
# ‚ö†Ô∏è  Get from Cloudinary dashboard ‚Üí Account Settings
CLOUDINARY_URL="cloudinary://<api_key>:<api_secret>@<cloud_name>"
CLOUDINARY_API_KEY="<from-cloudinary-dashboard>"
CLOUDINARY_API_SECRET="<from-cloudinary-dashboard>"
CLOUDINARY_CLOUD_NAME="<from-cloudinary-dashboard>"
CLOUDINARY_SECURE=true

# Sentry for Error Tracking
# ‚ö†Ô∏è  Sign up at: https://sentry.io (Free tier: 5k events/month)
# ‚ö†Ô∏è  Create new project, get DSN from Settings ‚Üí Client Keys (DSN)
SENTRY_DSN="https://<key>@o<org-id>.ingest.sentry.io/<project-id>"
SENTRY_ENVIRONMENT="staging"

# SendGrid for Email Delivery
# ‚ö†Ô∏è  Sign up at: https://sendgrid.com (Free tier: 100 emails/day)
# ‚ö†Ô∏è  Create API key in Settings ‚Üí API Keys
SENDGRID_API_KEY="<from-sendgrid-dashboard>"

# Email sender configuration
DEFAULT_FROM_EMAIL="noreply@vibecoding.community"
DEFAULT_FROM_NAME="Vibecoding Community Staging"

################################################################################
# OPTIONAL SERVICES (Configure later as needed)
################################################################################

# Google Analytics 4 / Tag Manager
# GA_ANALYTICS_4_ID=""

# Algolia for Search Enhancement
# ALGOLIA_APPLICATION_ID=""
# ALGOLIA_API_KEY=""
# ALGOLIA_SEARCH_ONLY_API_KEY=""

# Google reCAPTCHA (Anti-spam)
# RECAPTCHA_SECRET=""
# RECAPTCHA_SITE=""

# GitHub OAuth (for GitHub sign-in)
# GITHUB_KEY=""
# GITHUB_SECRET=""

# Slack Webhooks (for notifications)
# SLACK_WEBHOOK_URL=""
# SLACK_CHANNEL=""

################################################################################
# CLOUDFLARE CDN CONFIGURATION (OPTIONAL)
################################################################################

# Cloudflare CDN
# ‚ö†Ô∏è  Sign up at: https://cloudflare.com (Free tier)
# ‚ö†Ô∏è  Add your domain and update nameservers
# No environment variables needed - DNS/CDN configured via Cloudflare dashboard

################################################################################
# VIBECODING CUSTOMIZATIONS
################################################################################

# Anyon Integration (Epic 2 - configure when implementing)
# ANYON_API_KEY=""
# ANYON_PROJECT_ID=""

# Custom Feature Flags
ENABLE_VIBECODING_THEME="false"  # Enable after Epic 1.4 completed
ENABLE_ANYON_INTEGRATION="false"

################################################################################
# CONFIGURATION CHECKLIST
################################################################################
#
# Before deploying to staging, ensure you have:
#
# ‚úÖ REQUIRED (Must configure first):
#    1. DATABASE_URL (provided by Railway/Render)
#    2. REDIS_URL (provided by Railway/Render)
#    3. SECRET_KEY_BASE (generate with: rails secret)
#    4. FOREM_OWNER_SECRET (generate with: rails secret)
#    5. APP_DOMAIN (your staging URL)
#
# ‚ö†Ô∏è  RECOMMENDED (Configure before launch):
#    6. CLOUDINARY_URL and credentials (for image uploads)
#    7. SENTRY_DSN (for error tracking)
#    8. SENDGRID_API_KEY (for email notifications)
#
# üìã OPTIONAL (Can add later):
#    9. Cloudflare CDN (configure via DNS)
#   10. Google Analytics 4
#   11. OAuth providers (GitHub, Google, etc.)
#
# üìö See docs/deployment-runbook.md for detailed setup instructions
#
################################################################################
